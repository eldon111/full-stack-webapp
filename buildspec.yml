version: 0.2

batch:
  build-graph:
    - identifier: imageProcessor
      buildspec: image-processor/buildspec.yml

phases:
  install:
    runtime-versions:
      python: 3.x
      nodejs: 22

#  pre_build:
#    on-failure: ABORT
#    commands:
#      - 'cd image-processor'
#      - 'mkdir -p python'
#      - 'pip install -r requirements.txt  --only-binary=:all: -t python/'
#      - 'cd ..'
#      - 'cd frontend && npm ci && npm build'
#
#
#  build:
#    on-failure: ABORT
#    commands:
#      - 'zip -r layer.zip python'
#      - echo 'Created layer.zip'
#
#  post_build:
#    on-failure: ABORT
#    commands:
#      - 'rm -rf python'
#      - echo 'Deployment package created successfully!'
#
#artifacts:
#  files:
#    - 'layer.zip'
#  base-directory: image-processor